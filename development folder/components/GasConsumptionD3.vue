<script>
import * as d3 from "https://cdn.skypack.dev/d3@7";
export default {
  name: "GasConsumptionD3",
  props: {},
  data() {
    return {
      data_: [],
    };
  },
  mounted() {
    this.data_.push(70);
    this.data_.push(39);
  },
  methods: {
    
    gas_consumption_rects() {
      var width_svg = 600;
      var height_svg = 300;
      var colors = ["orange", "rgb(12,240,233)"];
      var idx = ["consumption", "reserve"];
      var textes = ["Consumo annuale", "Riserva totale"];
      var txt_values = ["70 MLD", "39 MLD"];

      d3.select("#svg_container")
        .append("svg")
        .attr("id", "gas_consumption_d3")
        .attr("width", 600)
        .attr("height", 300);

      var svg = d3.select("#gas_consumption_d3");

      svg
        .selectAll(".gas_consumption_rects")
        .data(this.data_)
        .enter()
        .append("rect")
        .attr("class", "gas_consumption_rects")
        .attr("id", (d, i) => idx[i])
        .attr("x", (d, i) => (width_svg / 2) * (i + 0.5) - 50)
        .attr("y", (d, i) => -50)
        .attr("height", (d) => d * 3)
        .attr("width", 200)
        .attr("stroke", (d, i) => colors[i])
        .attr("fill", (d, i) => colors[i])
        .attr("transform", "translate(0,100)");

      svg.select("#reserve").attr("transform", "translate(-99.5,193)");

      //bottom text
      svg
        .selectAll(".texts")
        .data(textes)
        .enter()
        .append("text")
        .attr("class", ".texts")
        .attr("id", (d, i) => idx[i] + "_txt")
        .attr("x", (d, i) => (width_svg / 2) * (i + 0.45))
        .attr("y", 250)
        .attr("stroke", "black")
        .attr("fill", "black")
        .text((d, i) => d);

      //upper text
      svg
        .selectAll(".texts")
        .data(txt_values)
        .enter()
        .append("text")
        .attr("class", ".texts")
        .attr("id", (d, i) => idx[i] + "_txt_top")
        .attr("x", (d, i) => (width_svg / 2) * (i + 0.6))
        .attr("y", 40)
        .attr("stroke", "grey")
        .attr("fill", "grey")
        .text((d, i) => d);

      svg.select("#reserve_txt").attr("transform", "translate(-85,0)");
      svg.select("#reserve_txt_top").attr("transform", "translate(-100,95)");

      var flame_path = `M216.02,611.195c5.978,3.178,12.284-3.704,8.624-9.4c-19.866-30.919-38.678-82.947-8.706-149.952
		c49.982-111.737,80.396-169.609,80.396-169.609s16.177,67.536,60.029,127.585c42.205,57.793,65.306,130.478,28.064,191.029
		c-3.495,5.683,2.668,12.388,8.607,9.349c46.1-23.582,97.806-70.885,103.64-165.017c2.151-28.764-1.075-69.034-17.206-119.851
		c-20.741-64.406-46.239-94.459-60.992-107.365c-4.413-3.861-11.276-0.439-10.914,5.413c4.299,69.494-21.845,87.129-36.726,47.386
		c-5.943-15.874-9.409-43.33-9.409-76.766c0-55.665-16.15-112.967-51.755-159.531c-9.259-12.109-20.093-23.424-32.523-33.073
		c-4.5-3.494-11.023,0.018-10.611,5.7c2.734,37.736,0.257,145.885-94.624,275.089c-86.029,119.851-52.693,211.896-40.864,236.826
		C153.666,566.767,185.212,594.814,216.02,611.195z`;

      var it_strips = [
        "M512,256c0-110.071-69.472-203.906-166.957-240.077v480.155C442.528,459.906,512,366.071,512,256z",
        "M0,256c0,110.071,69.472,203.906,166.957,240.077V15.923C69.472,52.094,0,145.929,0,256z",
      ];
      var oil_tower = [
        "M515.413333 256c-51.2 0-88.746667-27.306667-88.746666-68.266667s27.306667-58.026667 47.786666-64.853333c17.066667-6.826667 20.48-10.24 20.48-20.48 0-37.546667-17.066667-78.506667-17.066666-78.506667-3.413333-6.826667 0-13.653333 6.826666-20.48 6.826667-3.413333 13.653333-3.413333 20.48 0C508.586667 6.826667 614.4 88.746667 614.4 170.666667c0 27.306667-10.24 51.2-34.133333 64.853333-17.066667 13.653333-40.96 20.48-64.853334 20.48z m10.24-187.733333c0 10.24 3.413333 20.48 3.413334 34.133333 0 30.72-23.893333 40.96-40.96 51.2-20.48 10.24-27.306667 17.066667-27.306667 34.133333 0 20.48 27.306667 34.133333 54.613333 34.133334 17.066667 0 34.133333-3.413333 47.786667-13.653334 10.24-10.24 17.066667-20.48 17.066667-37.546666 0-34.133333-27.306667-71.68-54.613334-102.4zM563.2 921.6h-102.4c-10.24 0-17.066667-6.826667-17.066667-17.066667v-580.266666c0-10.24 6.826667-17.066667 17.066667-17.066667h102.4c10.24 0 17.066667 6.826667 17.066667 17.066667v580.266666c0 10.24-6.826667 17.066667-17.066667 17.066667zM477.866667 887.466667h68.266666V341.333333h-68.266666v546.133334z",
        "M802.133333 1024h-580.266666c-6.826667 0-13.653333-3.413333-13.653334-10.24-3.413333-6.826667-3.413333-13.653333 0-17.066667l68.266667-102.4c3.413333-3.413333 6.826667-6.826667 13.653333-6.826666h443.733334c6.826667 0 10.24 3.413333 13.653333 6.826666l68.266667 102.4c3.413333 6.826667 3.413333 13.653333 0 17.066667 0 6.826667-6.826667 10.24-13.653334 10.24zM252.586667 989.866667h515.413333l-44.373333-68.266667H300.373333l-47.786666 68.266667z",
        "M836.266667 1024h-648.533334c-10.24 0-17.066667-6.826667-17.066666-17.066667s6.826667-17.066667 17.066666-17.066666h648.533334c10.24 0 17.066667 6.826667 17.066666 17.066666s-6.826667 17.066667-17.066666 17.066667zM665.6 580.266667h-307.2c-10.24 0-17.066667-6.826667-17.066667-17.066667s6.826667-17.066667 17.066667-17.066667h307.2c10.24 0 17.066667 6.826667 17.066667 17.066667s-6.826667 17.066667-17.066667 17.066667z",
        "M290.133333 921.6h-3.413333c-10.24-3.413333-13.653333-13.653333-10.24-20.48l102.4-341.333333 68.266667-238.933334c3.413333-10.24 10.24-13.653333 20.48-10.24 10.24 3.413333 13.653333 13.653333 10.24 20.48l-68.266667 238.933334-102.4 341.333333c-3.413333 6.826667-10.24 10.24-17.066667 10.24zM733.866667 921.6c-6.826667 0-13.653333-3.413333-17.066667-13.653333l-102.4-341.333334-68.266667-238.933333c-3.413333-10.24 3.413333-17.066667 10.24-20.48 10.24-3.413333 17.066667 3.413333 20.48 10.24l68.266667 238.933333 102.4 341.333334c3.413333 10.24-3.413333 17.066667-10.24 20.48 0 3.413333-3.413333 3.413333-3.413333 3.413333z",
        "M460.8 921.6c-3.413333 0-10.24-3.413333-13.653333-6.826667l-119.466667-153.6c-3.413333-6.826667-3.413333-13.653333 0-20.48l119.466667-187.733333c3.413333-6.826667 17.066667-10.24 23.893333-6.826667 6.826667 3.413333 10.24 17.066667 6.826667 23.893334L361.813333 750.933333l112.64 143.36c6.826667 6.826667 3.413333 17.066667-3.413333 23.893334-3.413333 3.413333-6.826667 3.413333-10.24 3.413333zM563.2 921.6c-3.413333 0-6.826667 0-10.24-3.413333-6.826667-6.826667-10.24-17.066667-3.413333-23.893334l112.64-143.36-112.64-177.493333c-3.413333-6.826667-3.413333-17.066667 6.826666-23.893333 6.826667-3.413333 17.066667-3.413333 23.893334 6.826666l119.466666 187.733334c3.413333 6.826667 3.413333 13.653333 0 20.48L580.266667 918.186667c-6.826667 0-13.653333 3.413333-17.066667 3.413333zM597.333333 341.333333h-170.666666c-10.24 0-17.066667-6.826667-17.066667-17.066666s6.826667-17.066667 17.066667-17.066667h170.666666c10.24 0 17.066667 6.826667 17.066667 17.066667s-6.826667 17.066667-17.066667 17.066666z",
      ];
      /*
<circle style="fill:#F0F0F0;" cx="256" cy="256" r="256"/>
<path style="fill:#D80027;" d=/>
<path style="fill:#6DA544;" d=/>
    */

      //flame
      svg
        .append("path")
        .attr("d", flame_path)
        .attr("stroke", "white")
        .attr("transform", "scale(0.2),translate(700,400)");

      //italy_flag
      svg
        .append("circle")
        .attr("r", 40)
        .attr("fill", "#F0F0F0")
        .attr("cx", 400)
        .attr("cy", 190);
      svg
        .append("path")
        .attr("d", it_strips[1])
        .attr("stroke", "#6DA544")
        .attr("fill", "#6DA544")
        .attr("transform", "scale(0.157),translate(2290,955)");
      svg
        .append("path")
        .attr("d", it_strips[0])
        .attr("stroke", "#D80027")
        .attr("fill", "#D80027")
        .attr("transform", "scale(0.157),translate(2290,955)");

      //oil tower

      svg
        .append("path")
        .attr("d", oil_tower[0])
        .attr("stroke", "white")
        .attr("fill", "black")
        .attr("fill", "black")
        .attr("transform", "scale(0.06),translate(6150,2700)");

      svg
        .append("path")
        .attr("d", oil_tower[1])
        .attr("stroke", "white")
        .attr("fill", "black")
        .attr("fill", "black")
        .attr("transform", "scale(0.06),translate(6150,2700)");
      svg
        .append("path")
        .attr("d", oil_tower[2])
        .attr("stroke", "white")
        .attr("fill", "black")
        .attr("fill", "black")
        .attr("transform", "scale(0.06),translate(6150,2700)");
      svg
        .append("path")
        .attr("d", oil_tower[3])
        .attr("stroke", "white")
        .attr("fill", "black")
        .attr("fill", "black")
        .attr("transform", "scale(0.06),translate(6150,2700)");
      svg
        .append("path")
        .attr("d", oil_tower[4])
        .attr("stroke", "white")
        .attr("fill", "black")
        .attr("fill", "black")
        .attr("transform", "scale(0.06),translate(6150,2700)");
    },
  },
  watch: {
    data_: function (newVal) {
      this.gas_consumption_rects();
    },
  },
};
</script>

<template>
  <div id="svg_container"></div>
</template>

<style>
#svg_container{
  text-align: center;
}
</style>